---
apiVersion: v1
kind: Pod
metadata:
  name: test-pod
  labels:
    app: mon-test
spec:
  containers:
  - image: alpine:3.18
    name: test-pod-01
    # command: [ "tail", "-f", "/dev/null" ]
    command: [ "sh", "-c", "echo \"Install OpenSSH\";
      apk add openssh-server;
      ssh-keygen -t rsa -f /etc/ssh/ssh_host_rsa_key -q -N \"\";
      sed -i \"s/#PermitRootLogin prohibit-password/PermitRootLogin yes/g\" /etc/ssh/sshd_config;
      echo \"root:123456\" | chpasswd;
      /usr/sbin/sshd -D -e -ddd
      "
    ]
    resources:
      limits:
        memory: 256Mi
        cpu: 500m

...


---
apiVersion: v1
kind: Service
metadata:
  name: test-srv-22
spec:
  selector:
    app: mon-test
  type: LoadBalancer
  loadBalancerIP: 10.203.10.30
  ports:
    - protocol: TCP
      name: "ssh-22"
      port: 22
      targetPort: 22

...
